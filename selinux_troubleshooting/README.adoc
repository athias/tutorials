Selinux Troubleshooting Guide
=============================
:Author: Matthew Sawyer
:Email: athias@protonmail.com
:Date: 14 May 2018
:toc:

== Introduction

This guide is intended to provide examples of commonly seen selinux errors.  Following a common scenario we will re-create these common issues, identify the selinux error, and correct the issue.

This is not intended to be the perfect answer to every situation, nor is it meant to answer highly complex selinux issues.

NOTE: This guide is based on Red Hat Enterprise Linux 7.  The specific steps used may differ when using other operating systems.

== Other resources

https://people.redhat.com/duffy/selinux/selinux-coloring-book_A4-Stapled.pdf[The selinux coloring book]+
https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/pdf/selinux_users_and_administrators_guide/Red_Hat_Enterprise_Linux-7-SELinux_Users_and_Administrators_Guide-en-US.pdf[SELinux Admin Guide for RHEL 7]+
http://freecomputerbooks.com/books/The_SELinux_Notebook-4th_Edition.pdf[The SELinux Notebook - 4th Edition]+


== The Scenarios

.Common selinux issues presented:
* selinux context not set correctly
* selinux boolean must be configured
* custom selinux policy must be created

.Scenarios displaying common issues:
* Web Hosted - Local RPM Repository
* Web Hosted - Custom System Data
* Web Hosted - Configuration Scripts
* NFS Home Directories

== Is it really selinux

Before you even begin troubleshooting, you should try a simple test to determine if selinux really is the issue.  This is the most basic test that answers the question - Does it work when selinux is turned off, and fail when selinux is turned back on?  To answer this question, we simply turn selinux off temporarily and verify it works.

===Example 1


----
Disable selinux
  # setenforce 0
Restart httpd
  # systemctl restart httpd

* # setenforce 1


